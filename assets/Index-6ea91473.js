import{_ as j,x,d as U,j as w,B as q,b as W,r as g,o as m,k as y,l as s,g as A,q as $,w as h,c as r,A as c,t as n,h as l,F as z,C as k,P as I,D as S,E as G}from"./index-6a51b356.js";import{_,f as B,c as L}from"./TokenIcon-f6441e17.js";import"./dayjs.min-c263b26c.js";import{u as H}from"./presale-b9415f58.js";import{L as J,F as K}from"./Footer-825e1f2a.js";import{_ as M}from"./Dialog-55945bb9.js";import{s as i}from"./function-call-340b9aaf.js";import"./Progress-4f868af6.js";const Q={class:"lanuch-pad-manage"},X={class:"content"},Y={class:"operate"},Z={class:"status"},ee={key:0,class:"auditing"},ae={key:1,class:"fail"},se={class:"notes"},te={class:"support"},ne={class:"dialog-content"},oe={__name:"Index",setup(re){const b=x("global"),{t:o}=U(),v=w(!1),u=q(),P=W(),V=H();async function D(){if(!t.value)return;if(await(await k.wallet.contract(t.value.contractAddress,I)).isFunderChanged()){i(o("onlyOneChange"));return}v.value=!0}function N(){v.value=!1}async function O(){if(/^0x[0-9a-fA-F]{40}(,\d*\.?\d+)?$/.test(p.value)){const a=S({message:o("changingAddress")+"...",forbidClick:!0,duration:0});try{const e=await k.wallet.contract(t.value.contractAddress,I);if(await e.funder()==p.value){i(o("receivingAddressLimit"));return}if(t.value.contractCreator!==P.walletAddress){i(o("notCreator"));return}(await(await e.changeFunder(p.value)).wait()).status===1&&(i({type:"success",message:o("changeAddressSuccess")}),v.value=!1,p.value="")}catch(e){console.log(e),e.info&&e.info.error&&e.info.error.code===4001?i(o("userCancelOperate")):e.error&&e.error.message&&e.error.message=="Canceled"?i(o("userCancelOperate")):i(o("unkonwError"))}finally{a.close()}}else i(o("inputCorrectAddress"))}const t=w(null),p=w("");async function T(){const a=S({message:o("getDetail")+"...",forbidClick:!0,duration:0});try{let e=await k.presale.getPresale(u.params.chain,u.params.contractAddress);if(e.status!=1)throw e.msg;let f=e.data;t.value=await V.filterPresaleData(f)}catch(e){console.log(e)}finally{a.close()}}return T(),(a,e)=>{const f=g("van-button"),C=g("van-icon"),F=g("van-field"),R=g("van-cell-group");return m(),y(z,null,[s("div",Q,[s("div",X,[t.value?(m(),A(J,{key:0,presaleItem:t.value},null,8,["presaleItem"])):$("",!0),s("div",Y,[t.value&&t.value.approveStatus!=1?(m(),A(f,{key:0,class:"btn unactive",type:"primary"},{default:h(()=>[c(n(a.$t("changeReceivingAddress")),1)]),_:1})):(m(),A(f,{key:1,class:"btn",type:"primary",onClick:D},{default:h(()=>[c(n(a.$t("changeReceivingAddress")),1)]),_:1}))]),s("div",Z,[t.value&&t.value.approveStatus==0?(m(),y("div",ee,[r(C,{name:"clock"}),c(n(a.$t("reviewWait"))+"~",1)])):$("",!0),t.value&&t.value.approveStatus==2?(m(),y("div",ae,[r(C,{name:"warning"}),c(n(a.$t("auditFailed"))+"~",1)])):$("",!0)]),s("div",se,[s("div",null,n(a.$t("importantNote")),1),s("div",null,n(a.$t("noteInfo")),1),s("div",null,[c(n(l(B)(l(b).cfg.allowChainList.find(d=>d.chain==l(u).params.chain).presaleFactoryAddress.toLowerCase(),8))+" ",1),r(_,{name:"copy",onClick:e[0]||(e[0]=d=>l(L)(l(b).cfg.allowChainList.find(E=>E.chain==l(u).params.chain).presaleFactoryAddress.toLowerCase()))})]),s("div",null,[c(n(l(B)(l(u).params.contractAddress,8))+" ",1),r(_,{name:"copy",onClick:e[1]||(e[1]=d=>l(L)(l(u).params.contractAddress))})])]),s("div",te,[s("div",null,[c(n(a.$t("technicalSupport"))+": ",1),r(_,{class:"icon",name:"telegramBlue"})]),s("div",null,[c(n(a.$t("uploadFile"))+": ",1),r(_,{class:"icon",name:"telegramBlue"})])])]),r(K)]),r(M,{show:v.value,"onUpdate:show":e[3]||(e[3]=d=>v.value=d),title:a.$t("changeReceivingAddress"),confirmText:a.$t("confirmChange"),cancelText:a.$t("cancel"),onConfirmClick:O,onCancelClick:N},{default:h(()=>[G(a.$slots,"default",{},()=>[s("div",ne,[s("text",null,"*"+n(a.$t("onlyOneChange")),1),r(R,{class:"cell",inset:""},{default:h(()=>[r(F,{class:"input",modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=d=>p.value=d),clearable:"",placeholder:a.$t("receiveAddressPrompt")},null,8,["modelValue","placeholder"])]),_:1})])],!0)]),_:3},8,["show","title","confirmText","cancelText"])],64)}}},fe=j(oe,[["__scopeId","data-v-7cbbe43c"]]);export{fe as default};
