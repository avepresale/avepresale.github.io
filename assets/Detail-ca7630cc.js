import{_ as Q}from"./Dialog-123743ca.js";import{T as we,_ as D,d as W,a as X,g as $e,n as R,f as ge,c as Z}from"./TokenIcon-16a885e6.js";import{_ as te,n as v,j as le,B as Te,M as be,o as h,q as g,f as s,t,y as L,x as Ce,p as oe,g as ne,h as Ae,D as Se,k as M,r as ee,c as m,l as o,d as N,w as S,C as q,F as ae,G as Ie,E as k,N as Be,H as se}from"./index-831eb307.js";import{d as G,B as i,f as r,p as De}from"./dayjs.min-b1e50832.js";import{P as Re}from"./Progress-3c93c217.js";import{_ as Ne,M as Pe}from"./NumberInput-e0361fcc.js";import{u as Ee}from"./presale-e55ebbee.js";import{s as f}from"./function-call-ce30d6de.js";const Me=w=>(oe("data-v-4369e074"),w=w(),ne(),w),Le={class:"info-box"},He={key:0,class:"fold-operate-fixed"},Ue=Me(()=>s("span",{class:"dot"},"...",-1)),Fe={class:"fold-text"},xe={__name:"ShowMore",props:{introduce:{type:String,default:""}},setup(w){const n=w,d=v(!1),I=v(!0),B=v(null);le(),Te(()=>{H()});async function H(){if(!n.introduce)return;await be();let _=B.value.scrollHeight,P=B.value.offsetHeight;_>P&&(d.value=!0)}async function T(){I.value=!1}async function e(){I.value=!0}return(_,P)=>(h(),g("div",Le,[s("div",{class:Ce(["info",{fold:I.value}]),ref_key:"info",ref:B},[d.value&&I.value?(h(),g("div",He,[Ue,s("span",{class:"fold-operate",onClick:T},t(_.$t("expand")),1)])):L("",!0),s("span",Fe,t(n.introduce),1),I.value?L("",!0):(h(),g("span",{key:1,class:"fold-operate",onClick:e},t(_.$t("putAway")),1))],2)]))}},Ve=te(xe,[["__scopeId","data-v-4369e074"]]);const ie=w=>(oe("data-v-b3d25434"),w=w(),ne(),w),je={key:0,class:"detail-body"},Oe={class:"banner"},qe={class:"info detail-item"},Ge={class:"avatar"},Ye={class:"name"},ze={class:"tools"},Je={class:"contact-list"},Ke={class:"detail-item"},Qe={class:"title-grey"},We={class:"key-value-list"},Xe={class:"key-value"},Ze={class:"key"},ea={class:"value"},aa={class:"key-value"},sa={class:"key"},ta={class:"value"},la={class:"key-value"},oa={class:"key"},na={class:"value"},ia={class:"key-value"},ca={class:"key"},ua={class:"value"},ra={class:"key-value"},da={class:"key"},va={class:"value"},ma={class:"key-value"},ha={class:"key"},_a={class:"value"},ka={class:"key-value"},fa={class:"key"},ya={class:"value"},pa={class:"key-value"},wa={class:"key"},$a={class:"value"},ga={class:"key-value"},Ta={class:"key"},ba={class:"value"},Ca={class:"key-value"},Aa={class:"key"},Sa={class:"value icon-text"},Ia={class:"detail-item"},Ba={class:"title-grey"},Da=["href"],Ra={class:"key-value-list"},Na={class:"key-value"},Pa={class:"key"},Ea={class:"value"},Ma={class:"key-value"},La={class:"key"},Ha={class:"value"},Ua={class:"key-value"},Fa={class:"key"},xa={class:"value"},Va={class:"key-value"},ja={class:"key"},Oa={class:"value"},qa={class:"key-value"},Ga={class:"key"},Ya={class:"value"},za={class:"detail-item"},Ja={class:"amount"},Ka={class:"chain-drop-down"},Qa={class:"left"},Wa={class:"token"},Xa=ie(()=>s("div",{class:"right"},null,-1)),Za={class:"amount-info"},es={key:0},as={key:1},ss={class:"small"},ts={class:"small"},ls={class:"key-value-list"},os={class:"key-value"},ns={class:"key"},is={key:0},cs={key:1,class:"value"},us={class:"key-value"},rs={class:"key"},ds={class:"value"},vs={class:"key-value"},ms={class:"key"},hs={class:"value"},_s={class:"key-value"},ks={class:"key"},fs={class:"value"},ys={class:"risk-tips"},ps={class:"top-icon"},ws={class:"top-text"},$s=ie(()=>s("a",null,"https://t.me/farmersworldofficial",-1)),gs={class:"top-icon"},Ts={class:"top-text"},bs={__name:"Detail",setup(w){const{t:n}=le(),d=Ae(),I=Ee(),B=v(!1),H=Se(),T=v(""),e=v(null),_=v(0n),P=v(0n),Y=v(0n),b=v(0n),C=v(G().unix());async function ce(){const a=Ie({message:n("getDetail")+"...",forbidClick:!0,duration:0});try{let l=await k.presale.getPresale(H.params.chain,H.params.contractAddress);if(l.status!=1)throw l.msg;console.dir(l.data),e.value=l.data;let u=await ue(d.chain,e.value.tokenAddress);e.value.buyTax=u.buyTax,e.value.sellTax=u.sellTax,document.title=e.value.tokenName,await J()}catch(l){console.error(l)}finally{a.close()}}ce();async function ue(a,l){let u=0,c=0,y=await k.presale.getTokenFeeRate(a,l);if(y.status==1&&y.data[l.toLowerCase()]){const $=y.data[l.toLowerCase()].buy_tax,p=y.data[l.toLowerCase()].sell_tax;u=$?i($).toNumber():0,c=p?i(p).toNumber():0}return{buyTax:u,sellTax:c}}const re=M(()=>{var a,l;return`https://ave.ai/check/${(a=e.value)==null?void 0:a.tokenAddress}-${(l=e.value)==null?void 0:l.contractChain}`}),de=M(()=>{if(e.value){let a=[];return e.value.liquidityRate>0&&a.push(`${e.value.liquidityRate/100}% ${n("liquidity")}`),e.value.salesRate>0&&a.push(`${e.value.salesRate/100}% ${n("marketing&Construction")}`),e.value.marketRate>0&&a.push(`${e.value.marketRate/100}% ${n("markeRateManage")}`),e.value.otherRate>0&&a.push(`${e.value.otherRate/100}% ${n("other")}`),a.join(",")}return""}),ve=M(()=>{if(C.value&&e.value){let a=W(C.value,e.value.endTime);return`${a.day*24+a.hour<10?"0"+(a.day*24+a.hour):a.day*24+a.hour}:${a.minute<10?"0"+a.minute:a.minute}:${a.second<10?"0"+a.second:a.second} `}return""}),z=M(()=>{if(C.value&&e.value){let a=W(C.value,e.value.startTime),l="";return a.day>0&&(l+=`${a.day} ${n("day")}`),a.hour>0&&(l+=`${a.hour} ${n("hour")}`),a.minute>0&&(l+=`${a.minute} ${n("minute")}`),a.second>0&&(l+=`${a.second} ${n("second")}`),l}return""});async function J(){e.value&&(await U(),e.value.status==0&&e.value.startTime<=C.value<e.value.endTime&&setTimeout(()=>{J()},1e4))}async function U(){if(e.value){const a=await k.wallet.contractPresale(e.value.contractAddress);if(P.value=await a.cumulateAmount(),Y.value=await a.investorNumber(),b.value=await a.investAmounts(d.walletAddress),e.value.isEth){const l=k.wallet.getEthersProvider();_.value=await l.getBalance(d.walletAddress)}else{const l=await k.wallet.contractERC20(e.value.baseTokenAddress);_.value=await l.balanceOf(d.walletAddress)}}}async function me(){const a=await k.wallet.contractPresale(e.value.contractAddress);if(e.value.isEth){const y=k.wallet.getEthersProvider();_.value=await y.getBalance(d.walletAddress)}else{const y=await k.wallet.contractERC20(e.value.baseTokenAddress);_.value=await y.balanceOf(d.walletAddress)}const l=await a.getMaxInvestAmount();let u=i(r(_.value,e.value.baseTokenDecimal)),c=i(r(l,e.value.baseTokenDecimal));T.value=u.lt(c)?u.toString():c.toString()}setInterval(()=>{C.value=G().unix()},1e3);const A=M(()=>e.value?e.value.isEth&&d.chain==e.value.contractChain?d.chainCoinSymbol:e.value.baseTokenSymbol:""),F=v(!1);async function he(){if(!T.value){f(n("inputInvestAmount"));return}const a=i(T.value).toNumber();if(a<=0){f(n("investAmountLimit"));return}const l=i(r(e.value.minInvest,e.value.baseTokenDecimal)).toNumber(),u=i(r(e.value.maxInvest,e.value.baseTokenDecimal)).toNumber();if(a<l||a>u){f(n("investAmountLimit2"));return}F.value=!0;try{await _e()}catch(c){console.log(c)}finally{F.value=!1}}async function _e(){const a=await k.wallet.contractPresale(e.value.contractAddress);if(e.value.isEth){const $=k.wallet.getEthersProvider();_.value=await $.getBalance(d.walletAddress)}else{const $=await k.wallet.contractERC20(e.value.baseTokenAddress);_.value=await $.balanceOf(d.walletAddress)}const l=De(T.value,e.value.baseTokenDecimal);if(l>_.value){f(n("balanceNotEnough"));return}const u=await a.getMaxInvestAmount();if(l>u){f(n("exceededInvestRange"));return}let c;if(e.value.isEth)c=await a.buyToken(0n,{value:l});else{var y=await k.wallet.contractERC20(e.value.baseTokenAddress);if(await y.allowance(d.walletAddress,e.value.contractAddress)<l&&(f(n("approveFirst")),x.value=!0,!await K()))return;c=await a.buyToken(l)}console.dir(c),E.value=c.hash,await c.wait(),f({type:"success",message:n("upChainSuccessfully")}),I.setJoinedContractAddresses(d.walletAddress,e.value.contractAddress),B.value=!0,await U()}const x=v(!1),V=v(!1);async function K(){V.value=!0;try{var a=await k.wallet.contractERC20(e.value.baseTokenAddress);return(await(await a.approve(e.value.contractAddress,Pe)).wait()).status===1?(f({type:"success",message:n("upChainSuccessfully")}),x.value=!1,!0):(f(n("unkonwError")),!1)}catch(l){return console.log(l),l.info&&l.info.error&&l.info.error.code===4001?f(n("userCancelOperate")):l.error&&l.error.message&&l.error.message=="Canceled"?f(n("userCancelOperate")):f(n("unkonwError")),!1}finally{V.value=!1}}const j=v(!1),O=v(!1),E=v("");async function ke(){j.value=!0;try{await fe()}catch(a){console.log(a)}finally{j.value=!1}}async function fe(){if(b.value<=0n){f(n("notInvest"));return}let l=await(await k.wallet.contractPresale(e.value.contractAddress)).claim();E.value=l.hash,O.value=!0,l.wait().then(async u=>{u.status===1&&(f({type:"success",message:n("upChainSuccessfully")}),await U())})}async function ye(){window.open(d.txNetwork+E.value)}function pe(){window.open(d.txNetwork+E.value)}return(a,l)=>{var y,$;const u=ee("van-image"),c=ee("van-button");return h(),g(ae,null,[e.value?(h(),g("div",je,[s("div",Oe,[m(u,{class:"img",fit:"cover",position:"center",src:e.value.bannerImage},null,8,["src"])]),s("div",qe,[s("div",Ge,[m(we,{class:"token-icon",tokenIcon:o(X)(e.value.contractChain,e.value.tokenAddress),chainIcon:o($e)(e.value.contractChain)},null,8,["tokenIcon","chainIcon"])]),s("div",Ye,t(e.value.tokenSymbol),1),e.value.description?(h(),N(Ve,{key:0,introduce:e.value.description},null,8,["introduce"])):L("",!0),s("div",ze,[s("ul",Je,[s("li",null,[m(D,{name:"twitterGrey"})]),s("li",null,[m(D,{name:"telegramGrey"})]),s("li",null,[m(D,{name:"discordGrey"})]),s("li",null,[m(D,{name:"youtubeGrey"})])]),m(c,{type:"primary",class:"remind"},{default:S(()=>[q(t(a.$t("reminderForStarting")),1)]),_:1})])]),s("div",Ke,[s("div",Qe,t(a.$t("launchInformation")),1),s("ul",We,[s("li",Xe,[s("div",Ze,t(a.$t("launchTotal")),1),s("div",ea,t(o(R)(o(i)(o(r)(BigInt(e.value.saleAmount),e.value.tokenDecimal)))),1)]),s("li",aa,[s("div",sa,t(a.$t("initMarkrtValue")),1),s("div",ta,t(o(R)(o(i)(o(r)(BigInt(e.value.tokenTotalSupply),e.value.tokenDecimal)).div(o(r)(e.value.salePrice,6))))+t(o(A)),1)]),s("li",la,[s("div",oa,t(a.$t("launchPrice")),1),s("div",na,t(`1 ${o(A)} = ${o(i)(o(r)(e.value.salePrice,6))} ${e.value.tokenSymbol}`),1)]),s("li",ia,[s("div",ca,t(a.$t("launchRelease")),1),s("div",ua,t(`${o(i)(o(i)(e.value.saleAmount).div(o(i)(e.value.tokenTotalSupply)).multipliedBy(100).toFixed(8))}%${a.$t("release")}`),1)]),s("li",ra,[s("div",da,t(a.$t("launchEnd")),1),s("div",va,t(`${a.$t("endTime",{time:o(ve)})}`),1)]),s("li",ma,[s("div",ha,t(a.$t("tradeTime")),1),s("div",_a,t(`${o(G).unix(e.value.startTime).format("YYYY-MM-DD HH:mm")} (UTC)`),1)]),s("li",ka,[s("div",fa,t(a.$t("launchProgress")),1),s("div",ya,[m(Re,{launchAmountNow:o(i)(o(r)(P.value,e.value.baseTokenDecimal)).toString(),launchAmountTarget:o(i)(o(r)(e.value.hardCap,e.value.baseTokenDecimal)).toString(),symbol:o(A),class:"progress"},null,8,["launchAmountNow","launchAmountTarget","symbol"])])]),s("li",pa,[s("div",wa,t(a.$t("purposeOfFunds")),1),s("div",$a,t(o(de)),1)]),s("li",ga,[s("div",Ta,t(a.$t("liquidityAdd")),1),s("div",ba,t(a.$t("add&lockTime",{lpLockTime:e.value.lpLockTime})),1)]),s("li",Ca,[s("div",Aa,t(a.$t("tradePlatform")),1),s("div",Sa,[m(u,{class:"icon","lazy-load":"",round:"",src:`https://www.avestorage.cloud/swap/${e.value.dexName.toLowerCase()}.jpeg`,"error-icon":"/assets/images/default.png"},null,8,["src"]),s("div",null,t(e.value.dexName),1)])])])]),s("div",Ia,[s("div",Ba,[s("span",null,t(a.$t("economicModelTitle")),1),s("a",{class:"title-right contract-check",target:"_blank",href:o(re)},t(a.$t("contractDetection"))+">",9,Da)]),s("ul",Ra,[s("li",Na,[s("div",Pa,t(a.$t("tokenContract")),1),s("div",Ea,[q(t(o(ge)(e.value.tokenAddress))+" ",1),m(D,{name:"copy",onClick:l[0]||(l[0]=p=>o(Z)(e.value.tokenAddress))})])]),s("li",Ma,[s("div",La,t(a.$t("publishAmount")),1),s("div",Ha,t(o(R)(o(i)(o(r)(BigInt(e.value.tokenTotalSupply),e.value.tokenDecimal)))),1)]),s("li",Ua,[s("div",Fa,t(a.$t("shareAllocation")),1),s("div",xa,t(e.value.tokenEconomicModel?e.value.tokenEconomicModel:"--"),1)]),s("li",Va,[s("div",ja,t(a.$t("transactionTax")),1),s("div",Oa,t(`${a.$t("buy")} ${((y=e.value)==null?void 0:y.buyTax)*100}%, ${a.$t("sell")} ${(($=e.value)==null?void 0:$.sellTax)*100}%`),1)]),s("li",qa,[s("div",Ga,t(a.$t("taxDescription")),1),s("div",Ya,t(e.value.tokenTaxUsage?e.value.tokenTaxUsage:"--"),1)])])]),s("div",za,[s("div",null,[s("div",Ja,[s("div",Ka,[s("div",Qa,[m(u,{class:"icon","lazy-load":"",round:"",src:o(X)(e.value.contractChain,e.value.baseTokenAddress),"error-icon":"/assets/images/default.png"},null,8,["src"]),s("div",Wa,t(o(A)),1)]),Xa]),m(Ne,{modelValue:T.value,"onUpdate:modelValue":l[1]||(l[1]=p=>T.value=p),placeholder:a.$t("inputAmount"),class:"amount-ipt"},null,8,["modelValue","placeholder"]),s("div",{class:"amount-max",onClick:me},t(a.$t("max")),1)]),s("div",Za,[s("div",null,t(`${a.$t("investRange")}:${o(i)(o(r)(e.value.minInvest,e.value.baseTokenDecimal))}-${o(i)(o(r)(e.value.maxInvest,e.value.baseTokenDecimal))} ${o(A)}, ${a.$t("invested")}${o(i)(o(r)(b.value,e.value.baseTokenDecimal))}`),1),s("div",null,t(`${a.$t("balance")}: ${o(i)(o(r)(_.value,e.value.baseTokenDecimal))} ${o(A)}`),1)]),e.value.status==0&&C.value<e.value.startTime?(h(),N(c,{key:0,type:"primary",block:"",class:"btn",onClick:l[2]||(l[2]=p=>{o(Be)(a.$t("fromStartTime",{startTimeCountdown:o(z)}))})},{default:S(()=>[s("div",null,t(a.$t("fromStartTime",{startTimeCountdown:o(z)})),1)]),_:1})):e.value.status==0&&e.value.startTime<=C.value<e.value.endTime?(h(),g(ae,{key:1},[x.value?(h(),N(c,{key:0,type:"danger",block:"",class:"btn",onClick:K,loading:V.value},{default:S(()=>[q("Approve")]),_:1},8,["loading"])):(h(),N(c,{key:1,type:"primary",block:"",class:"btn",onClick:he,loading:F.value},{default:S(()=>[b.value==0n?(h(),g("div",es,t(a.$t("immediateInvest")),1)):(h(),g("div",as,t(a.$t("continueInvest")),1)),s("div",ss,"("+t(a.$t("investorPeople",{investorNumber:Y.value}))+")",1)]),_:1},8,["loading"]))],64)):e.value.status==1?(h(),N(c,{key:2,color:"#999999",block:"",class:"btn"},{default:S(()=>[s("div",null,t(a.$t("returnedToken")),1),s("div",ts,"(*"+t(a.$t("returnedAddress"))+")",1)]),_:1})):e.value.status==2?(h(),N(c,{key:3,type:"primary",block:"",class:"btn",onClick:ke,loading:j.value},{default:S(()=>[s("div",null,t(a.$t("finishReceiveToken")),1)]),_:1},8,["loading"])):L("",!0)]),s("ul",ls,[s("li",os,[s("div",ns,t(a.$t("investStatus")),1),b.value==0n?(h(),g("div",is,t(a.$t("notInvested")),1)):(h(),g("div",cs,t(a.$t("invested")),1))]),s("li",us,[s("div",rs,t(a.$t("expectedReceipt")),1),s("div",ds,t(`${o(R)(o(i)(o(r)(b.value,e.value.baseTokenDecimal)).multipliedBy(o(i)(o(r)(e.value.salePrice,6))))} ${e.value.tokenSymbol}`),1)]),s("li",vs,[s("div",ms,t(a.$t("investAmount")),1),s("div",hs,t(`${o(R)(o(i)(o(r)(b.value,e.value.baseTokenDecimal)))} ${o(A)}`),1)]),s("li",_s,[s("div",ks,t(a.$t("expectedReturn")),1),s("div",fs,t(`${o(R)(o(i)(o(r)(b.value,e.value.baseTokenDecimal)))} ${o(A)}`),1)])]),s("div",ys,[s("div",null,t(a.$t("riskReminder"))+":",1),s("div",null,t(a.$t("reminderInfo")),1)])])])):L("",!0),m(Q,{class:"show-join-success",confirmText:a.$t("reminderForStarting"),cancelText:a.$t("checkHash"),show:B.value,"onUpdate:show":l[3]||(l[3]=p=>B.value=p),onCancelClick:pe},{default:S(()=>[se(a.$slots,"default",{},()=>[s("div",ps,[m(D,{class:"icon",name:"createSuccess"}),s("div",ws,t(a.$t("SuccessParticipated")),1)]),s("text",null,t(a.$t("contactTeam")),1),$s],!0)]),_:3},8,["confirmText","cancelText","show"]),m(Q,{class:"show-join-success","confirm-text":a.$t("checkBlockchainBrowser"),show:O.value,"onUpdate:show":l[5]||(l[5]=p=>O.value=p),showCancelButton:!1,onConfirmClick:ye},{default:S(()=>[se(a.$slots,"default",{},()=>[s("div",gs,[m(D,{class:"icon",name:"createSuccess"}),s("div",Ts,t(a.$t("operateSuccess")),1)]),s("div",{class:"copy-hash",onClick:l[4]||(l[4]=p=>o(Z)(E.value))},t(a.$t("copyHash")),1)],!0)]),_:3},8,["confirm-text","show"])],64)}}},Ps=te(bs,[["__scopeId","data-v-b3d25434"]]);export{Ps as default};
