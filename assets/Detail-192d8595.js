import{_ as W}from"./Dialog-dfa1cb07.js";import{T as ke,d as X,a as pe,g as we,_ as D,n as P,f as $e,c as be}from"./TokenIcon-b6525580.js";import{_ as se,n as d,j as te,A as ge,L as Te,o as m,q as b,f as a,t,y as L,x as Ce,p as oe,g as le,h as Ae,C as Se,k as M,r as Z,c as h,l,d as R,w as A,B as q,F as ee,E as Ie,D as f,M as Be,G as ae}from"./index-b5f47da9.js";import{d as G,B as i,f as r,p as De}from"./dayjs.min-4d4c24d2.js";import{P as Re}from"./Progress-29e8ed1d.js";import{_ as Ne,M as Ee}from"./NumberInput-43ae584d.js";import{u as Pe}from"./presale-2a587016.js";import{s as y}from"./function-call-0f7299ee.js";const Me=w=>(oe("data-v-4369e074"),w=w(),le(),w),Le={class:"info-box"},Ue={key:0,class:"fold-operate-fixed"},xe=Me(()=>a("span",{class:"dot"},"...",-1)),Fe={class:"fold-text"},He={__name:"ShowMore",props:{introduce:{type:String,default:""}},setup(w){const n=w,u=d(!1),S=d(!0),I=d(null);te(),ge(()=>{U()});async function U(){if(!n.introduce)return;await Te();let _=I.value.scrollHeight,N=I.value.offsetHeight;_>N&&(u.value=!0)}async function g(){S.value=!1}async function s(){S.value=!0}return(_,N)=>(m(),b("div",Le,[a("div",{class:Ce(["info",{fold:S.value}]),ref_key:"info",ref:I},[u.value&&S.value?(m(),b("div",Ue,[xe,a("span",{class:"fold-operate",onClick:g},t(_.$t("expand")),1)])):L("",!0),a("span",Fe,t(n.introduce),1),S.value?L("",!0):(m(),b("span",{key:1,class:"fold-operate",onClick:s},t(_.$t("putAway")),1))],2)]))}},Ve=se(He,[["__scopeId","data-v-4369e074"]]);const z=w=>(oe("data-v-bd212c00"),w=w(),le(),w),je={key:0,class:"detail-body"},Oe={class:"banner"},qe=["src"],Ge={class:"info detail-item"},ze={class:"avatar"},Ye={class:"name"},Je={class:"tools"},Ke={class:"contact-list"},Qe={class:"detail-item"},We={class:"title-grey"},Xe={class:"key-value-list"},Ze={class:"key-value"},ea={class:"key"},aa={class:"value"},sa={class:"key-value"},ta={class:"key"},oa=z(()=>a("div",{class:"value"},"$--",-1)),la={class:"key-value"},na={class:"key"},ia={class:"value"},ca={class:"key-value"},ua={class:"key"},ra={class:"value"},da={class:"key-value"},va={class:"key"},ma={class:"value"},ha={class:"key-value"},_a={class:"key"},fa={class:"value"},ya={class:"key-value"},ka={class:"key"},pa={class:"value"},wa={class:"key-value"},$a={class:"key"},ba={class:"value"},ga={class:"key-value"},Ta={class:"key"},Ca={class:"value"},Aa={class:"key-value"},Sa={class:"key"},Ia={class:"value icon-text"},Ba={class:"detail-item"},Da={class:"title-grey"},Ra=["href"],Na={class:"key-value-list"},Ea={class:"key-value"},Pa={class:"key"},Ma={class:"value"},La={class:"key-value"},Ua={class:"key"},xa={class:"value"},Fa={class:"key-value"},Ha={class:"key"},Va={class:"value"},ja={class:"key-value"},Oa={class:"key"},qa={class:"value"},Ga={class:"key-value"},za={class:"key"},Ya={class:"value"},Ja={class:"detail-item"},Ka={class:"amount"},Qa={class:"chain-drop-down"},Wa={class:"left"},Xa={class:"token"},Za=z(()=>a("div",{class:"right"},null,-1)),es={class:"amount-info"},as={key:0},ss={key:1},ts={class:"small"},os={class:"small"},ls={class:"key-value-list"},ns={class:"key-value"},is={class:"key"},cs={key:0},us={key:1,class:"value"},rs={class:"key-value"},ds={class:"key"},vs={class:"value"},ms={class:"key-value"},hs={class:"key"},_s={class:"value"},fs={class:"key-value"},ys={class:"key"},ks={class:"value"},ps={class:"risk-tips"},ws={class:"top-icon"},$s={class:"top-text"},bs=z(()=>a("a",null,"https://t.me/farmersworldofficial",-1)),gs={class:"top-icon"},Ts={class:"top-text"},Cs={__name:"Detail",setup(w){const{t:n}=te(),u=Ae(),S=Pe(),I=d(!1),U=Se(),g=d(""),s=d(null),_=d(0n),N=d(0n),Y=d(0n),T=d(0n),C=d(G().unix());async function ne(){const e=Ie({message:n("getDetail")+"...",forbidClick:!0,duration:0});try{let o=await f.presale.getPresale(U.params.chain,U.params.contractAddress);if(o.status!=1)throw o.msg;console.dir(o.data),s.value=o.data;let c=await ie(u.chain,s.value.tokenAddress);s.value.buyTax=c.buyTax,s.value.sellTax=c.sellTax,document.title=s.value.tokenName,await K()}catch(o){console.error(o)}finally{e.close()}}ne();async function ie(e,o){let c=0,v=0,k=await f.presale.getTokenFeeRate(e,o);if(k.status==1&&k.data[o.toLowerCase()]){const $=k.data[o.toLowerCase()].buy_tax,p=k.data[o.toLowerCase()].sell_tax;c=$?i($).toNumber():0,v=p?i(p).toNumber():0}return{buyTax:c,sellTax:v}}const ce=M(()=>{var e,o;return`https://ave.ai/check/${(e=s.value)==null?void 0:e.tokenAddress}-${(o=s.value)==null?void 0:o.contractChain}`}),ue=M(()=>{if(s.value){let e=[];return s.value.liquidityRate>0&&e.push(`${s.value.liquidityRate/100}% ${n("liquidity")}`),s.value.salesRate>0&&e.push(`${s.value.salesRate/100}% ${n("marketing&Construction")}`),s.value.marketRate>0&&e.push(`${s.value.marketRate/100}% ${n("markeRateManage")}`),s.value.otherRate>0&&e.push(`${s.value.otherRate/100}% ${n("other")}`),e.join(",")}return""}),re=M(()=>{if(C.value&&s.value){let e=X(C.value,s.value.endTime);return`${e.day*24+e.hour<10?"0"+(e.day*24+e.hour):e.day*24+e.hour}:${e.minute<10?"0"+e.minute:e.minute}:${e.second<10?"0"+e.second:e.second} `}return""}),J=M(()=>{if(C.value&&s.value){let e=X(C.value,s.value.startTime),o="";return e.day>0&&(o+=`${e.day} ${n("day")}`),e.hour>0&&(o+=`${e.hour} ${n("hour")}`),e.minute>0&&(o+=`${e.minute} ${n("minute")}`),e.second>0&&(o+=`${e.second} ${n("second")}`),o}return""});async function K(){s.value&&(await x(),s.value.status==0&&s.value.startTime<=C.value<s.value.endTime&&setTimeout(()=>{K()},1e4))}async function x(){if(s.value){const e=await f.wallet.contractPresale(s.value.contractAddress);if(N.value=await e.cumulateAmount(),Y.value=await e.investorNumber(),T.value=await e.investAmounts(u.walletAddress),s.value.isEth){const o=f.wallet.getEthersProvider();_.value=await o.getBalance(u.walletAddress)}else{const o=await f.wallet.contractERC20(s.value.baseTokenAddress);_.value=await o.balanceOf(u.walletAddress)}}}async function de(){const e=await f.wallet.contractPresale(s.value.contractAddress);if(s.value.isEth){const k=f.wallet.getEthersProvider();_.value=await k.getBalance(u.walletAddress)}else{const k=await f.wallet.contractERC20(s.value.baseTokenAddress);_.value=await k.balanceOf(u.walletAddress)}const o=await e.getMaxInvestAmount();let c=i(r(_.value,s.value.baseTokenDecimal)),v=i(r(o,s.value.baseTokenDecimal));g.value=c.lt(v)?c.toString():v.toString()}setInterval(()=>{C.value=G().unix()},1e3);const B=M(()=>s.value?s.value.isEth&&u.chain==s.value.contractChain?u.chainCoinSymbol:s.value.baseTokenSymbol:""),F=d(!1);async function ve(){if(!g.value){y(n("inputInvestAmount"));return}const e=i(g.value).toNumber();if(e<=0){y(n("investAmountLimit"));return}const o=i(r(s.value.minInvest,s.value.baseTokenDecimal)).toNumber(),c=i(r(s.value.maxInvest,s.value.baseTokenDecimal)).toNumber();if(e<o||e>c){y(n("investAmountLimit2"));return}F.value=!0;try{await me()}catch(v){console.log(v)}finally{F.value=!1}}async function me(){const e=await f.wallet.contractPresale(s.value.contractAddress);if(s.value.isEth){const $=f.wallet.getEthersProvider();_.value=await $.getBalance(u.walletAddress)}else{const $=await f.wallet.contractERC20(s.value.baseTokenAddress);_.value=await $.balanceOf(u.walletAddress)}const o=De(g.value,s.value.baseTokenDecimal);if(o>_.value){y(n("balanceNotEnough"));return}const c=await e.getMaxInvestAmount();if(o>c){y(n("exceededInvestRange"));return}let v;if(s.value.isEth)v=await e.buyToken(0n,{value:o});else{var k=await f.wallet.contractERC20(s.value.baseTokenAddress);if(await k.allowance(u.walletAddress,s.value.contractAddress)<o&&(y(n("approveFirst")),H.value=!0,!await Q()))return;v=await e.buyToken(o)}console.dir(v),E.value=v.hash,await v.wait(),y({type:"success",message:n("upChainSuccessfully")}),S.setJoinedContractAddresses(u.walletAddress,s.value.contractAddress),I.value=!0,await x()}const H=d(!1),V=d(!1);async function Q(){V.value=!0;try{var e=await f.wallet.contractERC20(s.value.baseTokenAddress);return(await(await e.approve(s.value.contractAddress,Ee)).wait()).status===1?(y({type:"success",message:n("upChainSuccessfully")}),H.value=!1,!0):(y(n("unkonwError")),!1)}catch(o){return console.log(o),o.info&&o.info.error&&o.info.error.code===4001?y(n("userCancelOperate")):o.error&&o.error.message&&o.error.message=="Canceled"?y(n("userCancelOperate")):y(n("unkonwError")),!1}finally{V.value=!1}}const j=d(!1),O=d(!1),E=d("");async function he(){j.value=!0;try{await _e()}catch(e){console.log(e)}finally{j.value=!1}}async function _e(){if(T.value<=0n){y(n("notInvest"));return}let o=await(await f.wallet.contractPresale(s.value.contractAddress)).claim();E.value=o.hash,O.value=!0,o.wait().then(async c=>{c.status===1&&(y({type:"success",message:n("upChainSuccessfully")}),await x())})}async function fe(){window.open(u.txNetwork+E.value)}function ye(){window.open(u.txNetwork+E.value)}return(e,o)=>{var k,$;const c=Z("van-button"),v=Z("van-image");return m(),b(ee,null,[s.value?(m(),b("div",je,[a("div",Oe,[a("img",{src:s.value.bannerImage,alt:""},null,8,qe)]),a("div",Ge,[a("div",ze,[h(ke,{class:"token-icon",tokenIcon:l(pe)(s.value.tokenAddress),chainIcon:l(we)(s.value.contractChain)},null,8,["tokenIcon","chainIcon"])]),a("div",Ye,t(s.value.tokenSymbol),1),s.value.description?(m(),R(Ve,{key:0,introduce:s.value.description},null,8,["introduce"])):L("",!0),a("div",Je,[a("ul",Ke,[a("li",null,[h(D,{name:"twitterGrey"})]),a("li",null,[h(D,{name:"telegramGrey"})]),a("li",null,[h(D,{name:"discordGrey"})]),a("li",null,[h(D,{name:"youtubeGrey"})])]),h(c,{type:"primary",class:"remind"},{default:A(()=>[q(t(e.$t("reminderForStarting")),1)]),_:1})])]),a("div",Qe,[a("div",We,t(e.$t("launchInformation")),1),a("ul",Xe,[a("li",Ze,[a("div",ea,t(e.$t("launchTotal")),1),a("div",aa,t(l(P)(l(i)(l(r)(BigInt(s.value.saleAmount),s.value.tokenDecimal)))),1)]),a("li",sa,[a("div",ta,t(e.$t("initMarkrtValue")),1),oa]),a("li",la,[a("div",na,t(e.$t("launchPrice")),1),a("div",ia,t(`1 ${l(B)} = ${l(i)(l(r)(s.value.salePrice,6))} ${s.value.tokenSymbol}`),1)]),a("li",ca,[a("div",ua,t(e.$t("launchRelease")),1),a("div",ra,t(`${l(i)(l(i)(s.value.saleAmount).div(l(i)(s.value.tokenTotalSupply)).multipliedBy(100).toFixed(8))}%${e.$t("release")}`),1)]),a("li",da,[a("div",va,t(e.$t("launchEnd")),1),a("div",ma,t(`${l(re)} ${e.$t("end")}`),1)]),a("li",ha,[a("div",_a,t(e.$t("tradeTime")),1),a("div",fa,t(`${l(G).unix(s.value.startTime).format("YYYY-MM-DD HH:mm")} (UTC)`),1)]),a("li",ya,[a("div",ka,t(e.$t("launchProgress")),1),a("div",pa,[h(Re,{launchAmountNow:l(i)(l(r)(N.value,s.value.baseTokenDecimal)).toString(),launchAmountTarget:l(i)(l(r)(s.value.hardCap,s.value.baseTokenDecimal)).toString(),symbol:l(B),class:"progress"},null,8,["launchAmountNow","launchAmountTarget","symbol"])])]),a("li",wa,[a("div",$a,t(e.$t("purposeOfFunds")),1),a("div",ba,t(l(ue)),1)]),a("li",ga,[a("div",Ta,t(e.$t("liquidityAdd")),1),a("div",Ca,t(e.$t("add&lockTime",{lpLockTime:s.value.lpLockTime})),1)]),a("li",Aa,[a("div",Sa,t(e.$t("tradePlatform")),1),a("div",Ia,[h(v,{class:"icon","lazy-load":"",round:"",src:`https://www.avestorage.cloud/swap/${s.value.dexName.toLowerCase()}.jpeg`,"error-icon":"/assets/images/default.png"},null,8,["src"]),a("div",null,t(s.value.dexName),1)])])])]),a("div",Ba,[a("div",Da,[a("span",null,t(e.$t("economicModelTitle")),1),a("a",{class:"title-right contract-check",target:"_blank",href:l(ce)},t(e.$t("contractDetection"))+">",9,Ra)]),a("ul",Na,[a("li",Ea,[a("div",Pa,t(e.$t("tokenContract")),1),a("div",Ma,[q(t(l($e)(s.value.tokenAddress))+" ",1),h(D,{name:"copy"})])]),a("li",La,[a("div",Ua,t(e.$t("publishAmount")),1),a("div",xa,t(l(P)(l(i)(l(r)(BigInt(s.value.tokenTotalSupply),s.value.tokenDecimal)))),1)]),a("li",Fa,[a("div",Ha,t(e.$t("shareAllocation")),1),a("div",Va,t(s.value.tokenEconomicModel?s.value.tokenEconomicModel:"--"),1)]),a("li",ja,[a("div",Oa,t(e.$t("transactionTax")),1),a("div",qa,t(`${e.$t("buy")} ${((k=s.value)==null?void 0:k.buyTax)*100}%, ${e.$t("sell")} ${(($=s.value)==null?void 0:$.sellTax)*100}%`),1)]),a("li",Ga,[a("div",za,t(e.$t("taxDescription")),1),a("div",Ya,t(s.value.tokenTaxUsage?s.value.tokenTaxUsage:"--"),1)])])]),a("div",Ja,[a("div",null,[a("div",Ka,[a("div",Qa,[a("div",Wa,[h(v,{class:"icon","lazy-load":"",round:"",src:"https://ave.s3.ap-east-1.amazonaws.com/token_icon/bsc/0x5fac926bf1e638944bb16fb5b787b5ba4bc85b0a.png","error-icon":"/assets/images/default.png"}),a("div",Xa,t(l(B)),1)]),Za]),h(Ne,{modelValue:g.value,"onUpdate:modelValue":o[0]||(o[0]=p=>g.value=p),placeholder:e.$t("inputAmount"),class:"amount-ipt"},null,8,["modelValue","placeholder"]),a("div",{class:"amount-max",onClick:de},t(e.$t("max")),1)]),a("div",es,[a("div",null,t(`${e.$t("investRange")}:${l(i)(l(r)(s.value.minInvest,s.value.baseTokenDecimal))}-${l(i)(l(r)(s.value.maxInvest,s.value.baseTokenDecimal))} ${l(B)}, ${e.$t("invested")}${l(i)(l(r)(T.value,s.value.baseTokenDecimal))}`),1),a("div",null,t(`${e.$t("balance")}: ${l(i)(l(r)(_.value,s.value.baseTokenDecimal))} ${l(B)}`),1)]),s.value.status==0&&C.value<s.value.startTime?(m(),R(c,{key:0,type:"primary",block:"",class:"btn",onClick:o[1]||(o[1]=p=>{l(Be)(e.$t("fromStartTime",{startTimeCountdown:l(J)}))})},{default:A(()=>[a("div",null,t(e.$t("fromStartTime",{startTimeCountdown:l(J)})),1)]),_:1})):s.value.status==0&&s.value.startTime<=C.value<s.value.endTime?(m(),b(ee,{key:1},[H.value?(m(),R(c,{key:0,type:"danger",block:"",class:"btn",onClick:Q,loading:V.value},{default:A(()=>[q("Approve")]),_:1},8,["loading"])):(m(),R(c,{key:1,type:"primary",block:"",class:"btn",onClick:ve,loading:F.value},{default:A(()=>[T.value==0n?(m(),b("div",as,t(e.$t("immediateInvest")),1)):(m(),b("div",ss,t(e.$t("continueInvest")),1)),a("div",ts,"("+t(e.$t("investorPeople",{investorNumber:Y.value}))+")",1)]),_:1},8,["loading"]))],64)):s.value.status==1?(m(),R(c,{key:2,color:"#999999",block:"",class:"btn"},{default:A(()=>[a("div",null,t(e.$t("returnedToken")),1),a("div",os,"(*"+t(e.$t("returnedAddress"))+")",1)]),_:1})):s.value.status==2?(m(),R(c,{key:3,type:"primary",block:"",class:"btn",onClick:he,loading:j.value},{default:A(()=>[a("div",null,t(e.$t("finishReceiveToken")),1)]),_:1},8,["loading"])):L("",!0)]),a("ul",ls,[a("li",ns,[a("div",is,t(e.$t("investStatus")),1),T.value==0n?(m(),b("div",cs,t(e.$t("notInvested")),1)):(m(),b("div",us,t(e.$t("invested")),1))]),a("li",rs,[a("div",ds,t(e.$t("expectedReceipt")),1),a("div",vs,t(`${l(P)(l(i)(l(r)(T.value,s.value.baseTokenDecimal)).multipliedBy(l(i)(l(r)(s.value.salePrice,6))))} ${s.value.tokenSymbol}`),1)]),a("li",ms,[a("div",hs,t(e.$t("investAmount")),1),a("div",_s,t(`${l(P)(l(i)(l(r)(T.value,s.value.baseTokenDecimal)))} ${l(B)}`),1)]),a("li",fs,[a("div",ys,t(e.$t("expectedReturn")),1),a("div",ks,t(`${l(P)(l(i)(l(r)(T.value,s.value.baseTokenDecimal)))} ${l(B)}`),1)])]),a("div",ps,[a("div",null,t(e.$t("riskReminder"))+":",1),a("div",null,t(e.$t("reminderInfo")),1)])])])):L("",!0),h(W,{class:"show-join-success",confirmText:e.$t("reminderForStarting"),cancelText:e.$t("checkHash"),show:I.value,"onUpdate:show":o[2]||(o[2]=p=>I.value=p),onCancelClick:ye},{default:A(()=>[ae(e.$slots,"default",{},()=>[a("div",ws,[h(D,{class:"icon",name:"createSuccess"}),a("div",$s,t(e.$t("SuccessParticipated")),1)]),a("text",null,t(e.$t("contactTeam")),1),bs],!0)]),_:3},8,["confirmText","cancelText","show"]),h(W,{class:"show-join-success","confirm-text":e.$t("checkBlockchainBrowser"),show:O.value,"onUpdate:show":o[4]||(o[4]=p=>O.value=p),showCancelButton:!1,onConfirmClick:fe},{default:A(()=>[ae(e.$slots,"default",{},()=>[a("div",gs,[h(D,{class:"icon",name:"createSuccess"}),a("div",Ts,t(e.$t("operateSuccess")),1)]),a("div",{class:"copy-hash",onClick:o[3]||(o[3]=p=>l(be)(E.value))},t(e.$t("copyHash")),1)],!0)]),_:3},8,["confirm-text","show"])],64)}}},Ps=se(Cs,[["__scopeId","data-v-bd212c00"]]);export{Ps as default};
