import{D as Y}from"./DropDown-fa7e418b.js";import{_ as j,u as G,d as J,g as A,G as W,K as x,n as O,s as g,r as C,o as k,m as N,l as d,a as l,b as r,c as L,x as te,T as ae,t as p,j as t,J as $,F as M,y as Z,q as se,L as le,f as oe,A as z,M as ee,C as D}from"./index-9a7c4601.js";import{u as K}from"./create-4fb34212.js";import{B as w}from"./bignumber-3e8dfdf6.js";import{R as B}from"./Rate-505c1d16.js";/* empty css                                                       */const re={class:"chain-swap"},ue=["onClick"],ie={class:"left"},de={class:"swap-name"},ce={class:"right"},pe={__name:"ChainSwaps",props:{showChainSwap:Boolean},emits:["update:showChainSwap"],setup(R,{emit:U}){const _=R,{t:P}=G(),h=J(),e=K(),v=A(""),f=A([]);W(()=>_.showChainSwap,(b,m)=>{b&&f.value.length==0&&V()}),V();const I=x(()=>v.value?f.value.filter(b=>b.showName.toLowerCase().indexOf(v.value.toLocaleLowerCase())!=-1):f.value);async function V(){f.value=[];let b=h.chain;if(b=="bsc_test")f.value=[{chain:"bsc",factoryAddress:"0x6725F303b657a9451d8BA641348b6761A6CC7a17",isSwapSupported:1,name:"cakev2",routerAddress:"0xd99d1c33f9fc3444f8101754abc46c52416550d1",showName:"PancakeSwapV2",sortId:1,swapUrl:"https://pancakeswap.finance/swap?inputCurrency=BNB&outputCurrency=",swapIcon:"https://www.avestorage.cloud/swap/cakev2.jpeg"}];else try{let m=await O.ave.getChainSwaps(b);if(m.data.status==1){let i=m.data.data;if(i&&i.length>0)for(let o of i){let y="https://www.avestorage.cloud/swap/"+o.name+".jpeg",c={chain:o.chain,factoryAddress:o.factory_address.toLowerCase(),isSwapSupported:o.is_swap_supported,name:o.name,routerAddress:o.router_address.toLowerCase(),showName:o.show_name,sortId:o.sort_id,swapUrl:o.swap_url,swapIcon:y};f.value.push(c)}console.log(f.value)}else g(P("unknowError"))}catch(m){m&&m.message?g(m.message):g(P("unknowError"))}finally{}}function q(b){e.chainSwap=b,U("update:showChainSwap",!1)}return(b,m)=>{const i=C("van-search"),o=C("van-icon"),y=C("van-action-sheet");return k(),N(y,{show:R.showChainSwap,"safe-area-inset-bottom":"",title:b.$t("selectSwap"),onClose:m[1]||(m[1]=c=>U("update:showChainSwap",!1)),onCancel:m[2]||(m[2]=c=>U("update:showChainSwap",!1))},{default:d(()=>[l(i,{modelValue:v.value,"onUpdate:modelValue":m[0]||(m[0]=c=>v.value=c),shape:"round",placeholder:b.$t("search"),clearable:""},null,8,["modelValue","placeholder"]),r("ul",re,[(k(!0),L(M,null,te(I.value,c=>(k(),L("li",{class:"swap-item",onClick:S=>q(c)},[r("div",ie,[l(ae,{class:"token-icon",tokenIcon:c.swapIcon},null,8,["tokenIcon"]),r("div",de,p(c.showName),1)]),r("div",ce,[t(e).chainSwap&&t(e).chainSwap.factoryAddress==c.factoryAddress?(k(),N(o,{key:0,name:"success",color:"#3F80F7"})):$("",!0)])],8,ue))),256))])]),_:1},8,["show","title"])}}},ve=j(pe,[["__scopeId","data-v-7541d141"]]);const me={class:"token-list"},we=["onClick"],fe={class:"left"},ye={class:"token-info"},ke={class:"token-name"},he={key:0,class:"token-address"},be={class:"right"},_e={key:0,class:"amount"},Fe={class:"price"},ge={class:"icon"},Ce={__name:"TokenList",props:{showTokenList:Boolean},emits:["update:showTokenList"],setup(R,{emit:U}){const _=R,{t:P}=G(),h=J(),e=K(),v=A(""),f=A([]);W(()=>_.showTokenList,(i,o)=>{i&&f.value.length==0&&b()}),b();const I=A([]);W(()=>[v.value,f.value],async()=>{I.value=await V()});async function V(){if(v.value)if(v.value.startsWith("0x")){let i=f.value.filter(o=>o.tokenAddress.toLowerCase()==v.value.toLowerCase());if(i.length==0&&le(v.value)){let o=await O.wallet.contractERC20(v.value);const y=v.value.toLowerCase(),c=await o.balanceOf(h.walletAddress),S=await o.decimals(),a=await o.name(),n=await o.symbol();let s={chain:h.chain,decimals:Number(S),name:a,symbol:n,tokenAddress:y,currentPriceUsd:0,value:Number(ethers.formatUnits(c.toString(),S)),icon:`https://ave.s3.ap-east-1.amazonaws.com/token_icon/${h.chain}/${y}.png`};i.push(s)}return i}else return f.value.filter(i=>i.symbol.toLowerCase().indexOf(v.value.toLowerCase())>-1);else return f.value}function q(i){e.token=i,U("update:showTokenList",!1)}async function b(){let i=h.chain,o=[];if(i=="bsc_test")o=[{chain:"bsc",demical:18,name:"",symbol:"BNB",tokenAddress:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",currentPriceUsd:289.85489812433093,value:.0319133884,icon:"https://ave.s3.ap-east-1.amazonaws.com/token_icon/bsc/0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee.png"},{chain:"bsc",demical:18,name:"Binance-Peg BSC-USD",symbol:"USDT",tokenAddress:"0x337610d27c682E347C9cD60BD4b3b107C9d34dDd",currentPriceUsd:.9970705187821386,value:0,icon:"https://ave.s3.ap-east-1.amazonaws.com/token_icon/bsc/0x55d398326f99059ff775485246999027b3197955.png"},{chain:"bsc",demical:18,name:"Wrapped BNB",symbol:"WBNB",tokenAddress:"0xae13d989dac2f0debff460ac112a837c89baa7cd",currentPriceUsd:289.85489812433093,value:0,icon:"https://ave.s3.ap-east-1.amazonaws.com/token_icon/bsc/0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c.png"}];else try{let y=await O.ave.getUserToken(i,h.walletAddress);if(console.log(y),y.data.status==1){let S=y.data.data.filter(a=>new RegExp("^0x.*$","gi").test(a.token)&&a.value>0&&a.risk_score<60&&a.risk_level>=0&&a.flag!=="blacklist"&&a.symbol!==""&&a.flag!=="lp"&&a.token=="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee").map(a=>({chain:a.chain,demical:a.decimals,name:a.name,symbol:a.symbol,tokenAddress:a.token.toLowerCase(),currentPriceUsd:a.current_price_usd,value:a.value,icon:Z(a.chain.toLowerCase(),a.token.toLowerCase())}));o=o.concat(S)}else return;let c=await O.ave.getSwapTokens(i);if(console.log(c),c.data.status==1){let S=c.data.data.filter(a=>new RegExp("^0x.*$","gi").test(a.token)&&o.findIndex(n=>n.tokenAddress==a.token)==-1&&a.risk_score<60&&a.risk_level>=0&&a.flag!=="blacklist"&&a.symbol!==""&&a.flag!=="lp"&&a.token=="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee").map(a=>({chain:a.chain,demical:a.decimals,name:a.name,symbol:a.symbol,tokenAddress:a.token.toLowerCase(),currentPriceUsd:a.current_price_usd,value:a.value,icon:Z(a.chain.toLowerCase(),a.token.toLowerCase())}));o=o.concat(S)}else return}catch(y){y&&y.message?g(y.message):g(P("unknowError")),o=[]}finally{}f.value=o}function m(){U("update:showTokenList",!1)}return(i,o)=>{const y=C("van-search"),c=C("van-icon"),S=C("van-action-sheet");return k(),N(S,{show:R.showTokenList,"safe-area-inset-bottom":"",title:i.$t("selectCurrency"),onClose:m,onCancel:m},{default:d(()=>[l(y,{modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=a=>v.value=a),shape:"round",placeholder:i.$t("searchTokenOrName"),clearable:""},null,8,["modelValue","placeholder"]),r("ul",me,[(k(!0),L(M,null,te(I.value,a=>(k(),L("li",{class:"token-item",onClick:n=>q(a)},[r("div",fe,[l(ae,{class:"token-icon",tokenIcon:a.icon},null,8,["tokenIcon"]),r("div",ye,[r("div",ke,p(a.symbol),1),a.tokenAddress!=="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"?(k(),L("div",he,p(t(se)(a.tokenAddress)),1)):$("",!0)])]),r("div",be,[a.value>0?(k(),L("div",_e,[r("div",null,p(t(w)(a.value).toString().indexOf(".")==-1?t(w)(a.value):t(w)(a.value).toFixed(6)),1),r("div",Fe,"$"+p(t(w)(a.value).multipliedBy(a.currentPriceUsd).toFixed(2)),1)])):$("",!0),r("div",ge,[t(e).token&&t(e).token.tokenAddress==a.tokenAddress?(k(),N(c,{key:0,name:"success",color:"#3F80F7"})):$("",!0)])])],8,we))),256))])]),_:1},8,["show","title"])}}},Se=j(Ce,[["__scopeId","data-v-f95775bb"]]);const Te={class:"setting"},$e={class:"explain"},Ie={style:{color:"#999"}},Le={class:"rate-setting"},xe={class:"title"},Ae={class:"rate-setting"},Be={class:"title"},Ne={class:"address-setting"},Ue={class:"title"},Pe={class:"explain"},Re={class:"btn-control-group"},Ve={style:{"text-align":"center","padding-top":"20px"}},Ee={class:"content"},F=20,De={__name:"TaxSetting",props:{createTokenLoading:Boolean},emits:["createTokenClick","nextStepClick"],setup(R,{emit:U}){const{t:_}=G(),P=oe(),h=J(),e=K(),v=A(!1),f=A(!1),I=A(!1);A(!1);const V=x(()=>e.deployerId==1?w(F).minus(e.buyBurnFee).minus(e.buyLPFee).toNumber():e.deployerId==2||e.deployerId==3?w(F).minus(e.buyRewardFee).minus(e.buyLPFee).toNumber():0),q=x(()=>e.deployerId==1?w(F).minus(e.buyFundFee).minus(e.buyBurnFee).toNumber():e.deployerId==2||e.deployerId==3?w(F).minus(e.buyFundFee).minus(e.buyRewardFee).toNumber():0),b=x(()=>{if(e.deployerId==1)return w(F).minus(e.buyFundFee).minus(e.buyLPFee).toNumber()}),m=x(()=>e.deployerId==2||e.deployerId==3?w(F).minus(e.buyFundFee).minus(e.buyLPFee).toNumber():0),i=x(()=>e.deployerId==1?w(F).minus(e.sellBurnFee).minus(e.sellLPFee).toNumber():e.deployerId==2||e.deployerId==3?w(F).minus(e.sellRewardFee).minus(e.sellLPFee).toNumber():0),o=x(()=>e.deployerId==1?w(F).minus(e.sellFundFee).minus(e.sellBurnFee).toNumber():e.deployerId==2||e.deployerId==3?w(F).minus(e.sellFundFee).minus(e.sellRewardFee).toNumber():0),y=x(()=>e.deployerId==1?w(F).minus(e.sellFundFee).minus(e.sellLPFee).toNumber():0),c=x(()=>e.deployerId==2||e.deployerId==3?w(F).minus(e.sellFundFee).minus(e.sellLPFee).toNumber():0);function S(){P.push("/createToken/create/detail")}function a(){const n=/^0x[0-9a-fA-F]{40}(,\d*\.?\d+)?$/;if(e.deployerId===1||e.deployerId==2||e.deployerId==3){if(!e.token){g(_("pleaseSelectCurrency"));return}if(!e.chainSwap){g(_("pleaseSelectSwap"));return}if(e.deployerId===1){if(w(e.buyFundFee).plus(e.buyBurnFee).plus(e.buyLPFee).plus(e.sellFundFee).plus(e.sellBurnFee).plus(e.sellLPFee).lte(0)){g(_("taxMustGt0"));return}}else if(e.deployerId===2){if(w(e.buyFundFee).plus(e.buyLPFee).plus(e.sellFundFee).plus(e.sellLPFee).lte(0)){g(_("taxlimit2"));return}}else if(e.deployerId===3){if(!e.rewardToken){g(_("dividendTokenError"));return}if(!n.test(e.rewardToken)){g(_("pleaseEnterTrueAddress"));return}if(w(e.buyFundFee).plus(e.buyLPFee).plus(e.buyRewardFee).plus(e.sellFundFee).plus(e.sellLPFee).plus(e.sellRewardFee).lte(0)){g(_("taxMustGt0"));return}}if((Number(e.buyFundFee)>0||Number(e.sellFundFee)>0)&&!e.fundAddress){g(_("pleaseEnterMarketingAddress"));return}if(e.fundAddress&&!n.test(e.fundAddress)){g(_("pleaseEnterTrueAddress"));return}}P.push("/createToken/create/IssueControl")}return e.step=1,(n,s)=>{const T=C("van-cell"),E=C("van-cell-group"),H=C("van-field"),Q=C("van-icon"),X=C("van-button"),ne=C("van-dialog");return k(),L(M,null,[r("div",Te,[l(E,{inset:""},{default:d(()=>[l(T,{title:n.$t("selectCurrency"),class:"switch-cell",onClick:s[0]||(s[0]=u=>f.value=!0)},ee({_:2},[t(e).token?{name:"value",fn:d(()=>[l(Y,{logo:t(e).token.icon,value:t(e).token.symbol},null,8,["logo","value"])]),key:"0"}:{name:"value",fn:d(()=>[r("div",null,"---")]),key:"1"}]),1032,["title"])]),_:1}),r("div",$e,p(n.$t("currencyExplain")),1),l(E,{inset:""},{default:d(()=>[l(T,{title:n.$t("selectSwap"),class:"switch-cell",onClick:s[1]||(s[1]=u=>v.value=!0)},ee({_:2},[t(e).chainSwap?{name:"value",fn:d(()=>[l(Y,{logo:t(e).chainSwap.swapIcon,value:t(e).chainSwap.showName},null,8,["logo","value"])]),key:"0"}:{name:"value",fn:d(()=>[r("div",null,"---")]),key:"1"}]),1032,["title"])]),_:1}),t(e).deployerId===3?(k(),L(M,{key:0},[l(E,{inset:"",class:"rate-cell"},{default:d(()=>[l(H,{modelValue:t(e).rewardToken,"onUpdate:modelValue":s[2]||(s[2]=u=>t(e).rewardToken=u),"label-width":"8em",label:n.$t("rewardToken"),placeholder:n.$t("enterContract"),"input-align":"right"},null,8,["modelValue","label","placeholder"])]),_:1}),l(E,{inset:"",class:"rate-cell"},{default:d(()=>[r("div",Ie,p(n.$t("rewardTokenInfo",{chainToken:t(h).chainCoinSymbol})),1)]),_:1})],64)):$("",!0),r("div",Le,[r("div",xe,[z(p(t(_)("buyTax",{max:F})),1),l(Q,{class:"question-icon",name:"question-o",onClick:s[3]||(s[3]=u=>I.value=!0)})]),l(T,{class:"rate-cell",title:n.$t("marketingTax")},{extra:d(()=>[l(B,{value:t(e).buyFundFee,"onUpdate:value":s[4]||(s[4]=u=>t(e).buyFundFee=u),"max-value":V.value},null,8,["value","max-value"])]),_:1},8,["title"]),l(T,{class:"rate-cell",title:n.$t("liquidityTax")},{extra:d(()=>[l(B,{value:t(e).buyLPFee,"onUpdate:value":s[5]||(s[5]=u=>t(e).buyLPFee=u),"max-value":q.value},null,8,["value","max-value"])]),_:1},8,["title"]),t(e).deployerId==1?(k(),N(T,{key:0,class:"rate-cell",title:n.$t("burnTax")},{extra:d(()=>[l(B,{value:t(e).buyBurnFee,"onUpdate:value":s[6]||(s[6]=u=>t(e).buyBurnFee=u),"max-value":b.value},null,8,["value","max-value"])]),_:1},8,["title"])):$("",!0),t(e).deployerId==2||t(e).deployerId==3?(k(),N(T,{key:1,class:"rate-cell",title:n.$t("rewardTax")},{extra:d(()=>[l(B,{value:t(e).buyRewardFee,"onUpdate:value":s[7]||(s[7]=u=>t(e).buyRewardFee=u),"max-value":m.value},null,8,["value","max-value"])]),_:1},8,["title"])):$("",!0)]),r("div",Ae,[r("div",Be,[z(p(t(_)("sellTax",{max:F})),1),l(Q,{class:"question-icon",name:"question-o",onClick:s[8]||(s[8]=u=>I.value=!0)})]),l(T,{class:"rate-cell",title:n.$t("marketingTax")},{extra:d(()=>[l(B,{value:t(e).sellFundFee,"onUpdate:value":s[9]||(s[9]=u=>t(e).sellFundFee=u),"max-value":i.value},null,8,["value","max-value"])]),_:1},8,["title"]),l(T,{class:"rate-cell",title:n.$t("liquidityTax")},{extra:d(()=>[l(B,{value:t(e).sellLPFee,"onUpdate:value":s[10]||(s[10]=u=>t(e).sellLPFee=u),"max-value":o.value},null,8,["value","max-value"])]),_:1},8,["title"]),t(e).deployerId==1?(k(),N(T,{key:0,class:"rate-cell",title:n.$t("burnTax")},{extra:d(()=>[l(B,{value:t(e).sellBurnFee,"onUpdate:value":s[11]||(s[11]=u=>t(e).sellBurnFee=u),"max-value":y.value},null,8,["value","max-value"])]),_:1},8,["title"])):$("",!0),t(e).deployerId==2||t(e).deployerId==3?(k(),N(T,{key:1,class:"rate-cell",title:n.$t("rewardTax")},{extra:d(()=>[l(B,{value:t(e).sellRewardFee,"onUpdate:value":s[12]||(s[12]=u=>t(e).sellRewardFee=u),"max-value":c.value},null,8,["value","max-value"])]),_:1},8,["title"])):$("",!0)]),r("div",Ne,[r("div",Ue,p(n.$t("addressSetting")),1),l(E,{inset:"",class:"rate-cell"},{default:d(()=>[l(T,{title:n.$t("ownerAddr"),class:"switch-cell",value:t(se)(t(h).walletAddress)},null,8,["title","value"])]),_:1}),l(E,{inset:"",class:"rate-cell"},{default:d(()=>[l(H,{modelValue:t(e).fundAddress,"onUpdate:modelValue":s[13]||(s[13]=u=>t(e).fundAddress=u),"label-width":"10em",label:n.$t("marketingAddress"),placeholder:n.$t("enterAddress"),"input-align":"right"},null,8,["modelValue","label","placeholder"])]),_:1}),r("div",Pe,p(n.$t("marketAddressExplain")),1)]),r("div",Re,[l(X,{type:"primary",plain:"",round:"",block:"",class:"btn-control",onClick:S},{default:d(()=>[z(p(n.$t("previousStep")),1)]),_:1}),l(X,{type:"primary",round:"",block:"",class:"btn-control",onClick:a},{default:d(()=>[z(p(n.$t("nextStep")),1)]),_:1})]),r("div",Ve,p(n.$t("creationFee",{baseFeeAmount:t(e).baseFee,baseFeeSymbol:t(h).chainCoinSymbol})),1)]),l(ne,{class:"tax-instruction",show:I.value,"onUpdate:show":s[14]||(s[14]=u=>I.value=u),title:n.$t("taxInstruction"),showCancelButton:!1,confirmButtonText:n.$t("understand"),onConfirm:s[15]||(s[15]=u=>I.value=!1),"close-on-click-overlay":""},{default:d(()=>[r("div",Ee,[r("div",{class:D(t(h).language)},p(n.$t("taxInstructionText1")),3),r("div",{class:D(t(h).language)},p(n.$t("taxInstructionText2")),3),r("div",{class:D(t(h).language)},p(n.$t("taxInstructionText3")),3),t(e).deployerId==1?(k(),L("div",{key:0,class:D(t(h).language)},p(n.$t("taxInstructionText4")),3)):$("",!0),t(e).deployerId==2||t(e).deployerId==3?(k(),L("div",{key:1,class:D(t(h).language)},p(n.$t("taxInstructionText5")),3)):$("",!0),r("div",{class:D(t(h).language)},p(n.$t("taxInstructionText6")),3)])]),_:1},8,["show","title","confirmButtonText"]),l(Se,{showTokenList:f.value,"onUpdate:showTokenList":s[16]||(s[16]=u=>f.value=u)},null,8,["showTokenList"]),l(ve,{showChainSwap:v.value,"onUpdate:showChainSwap":s[17]||(s[17]=u=>v.value=u)},null,8,["showChainSwap"])],64)}}},Ge=j(De,[["__scopeId","data-v-1c3626ee"]]);export{Ge as default};
