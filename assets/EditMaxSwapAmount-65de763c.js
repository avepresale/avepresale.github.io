import{D as A}from"./Dialog-4990feff.js";import{_ as x,u as C,d as k,f as E,K as w,g as i,r as v,o as B,c as O,b as V,a as m,l as g,j as $,F as H,q as M,s as o,n as N,A as T,t as U,v as D}from"./index-be4bd9f5.js";import{u as L}from"./manage-a686e6bd.js";import{a as F,f as I}from"./units-c9e15f7d.js";/* empty css                                                       */import"./bignumber-3e8dfdf6.js";const j={class:"mint-token"},q={__name:"EditMaxSwapAmount",setup(K){const{t}=C(),_=k();E();const s=L(),h=w(()=>_.walletAddress.toLowerCase()===s.owner.toLowerCase()),c=i(""),n=i(s.maxSwapAmount),b=w(()=>t("operationHash",{hash:M(c.value)})),p=i(!1),r=i(!1);function y(a){return a.replace("-","")}async function S(){if(!n.value){o(t("amountEmpty"));return}if(n.value.replace(".","").length>34){o(t("amountOver"));return}let a=n.value.split(".");if(a[1]&&a[1].length>s.decimals){o(t("amountOver"));return}r.value=!0;try{const e=await N.wallet.contract(s.tokenAddress,s.abi);let l=await e.changeSwapLimit(F(n.value,s.decimals));o({type:"success",message:t("submitSuccess")}),c.value=l.hash,p.value=!0,l.wait().then(async d=>{if(d.status===1){o({type:"success",message:t("upChainSuccessfully")});let f=await e.maxSwapAmount();s.maxSwapAmount=I(f.toString(),s.decimals)}r.value=!1})}catch(e){console.log(e),e.info&&e.info.error&&e.info.error.code===4001?o(t("userCancelOperate")):e.error&&e.error.message&&e.error.message=="Canceled"?o(t("userCancelOperate")):o(t("unkonwError")),r.value=!1}finally{}}return(a,e)=>{const l=v("van-field"),d=v("van-cell-group"),f=v("van-button");return B(),O(H,null,[V("div",j,[m(d,{inset:""},{default:g(()=>[m(l,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=u=>n.value=u),"label-width":"9.2em",type:"number",label:a.$t("swapAmount"),placeholder:a.$t("pleaseEnter"),formatter:y,"input-align":"right"},null,8,["modelValue","label","placeholder"])]),_:1}),m(f,{type:"primary",round:"",block:"",class:"btn",onClick:S,loading:r.value,disabled:!h.value},{default:g(()=>[T(U(a.$t("submit")),1)]),_:1},8,["loading","disabled"])]),m(A,{show:p.value,"onUpdate:show":e[1]||(e[1]=u=>p.value=u),title:a.$t("submitSuccess"),message:b.value,showCancelButton:!1,confirmButtonText:a.$t("copyHash"),onOnConfirm:e[2]||(e[2]=u=>$(D)(c.value))},null,8,["show","title","message","confirmButtonText"])],64)}}},W=x(q,[["__scopeId","data-v-4b77f2b2"]]);export{W as default};
