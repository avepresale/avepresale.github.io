import{_ as Z,u as x,f as ee,d as te,g,J as T,r as F,o as p,c as y,b as a,a as l,j as n,T as ne,t as s,A as c,k as N,l as u,I as k,m as S,F as se,q as A,n as U,s as d,y as oe,v as B,M as ae,N as le}from"./index-9af302bf.js";import{B as I}from"./bignumber-3e8dfdf6.js";import{u as re}from"./manage-70d7494d.js";import{D as P}from"./Dialog-d7c31890.js";import"./units-ccec3d05.js";/* empty css                                                       */const ie=b=>(ae("data-v-7b0c5a78"),b=b(),le(),b),ue={class:"manage"},de=ie(()=>a("div",{class:"top-background"},null,-1)),ce={class:"top"},pe={class:"token-info"},me={class:"left"},fe={class:"token-name"},ve={class:"right"},ye={key:0},ke={key:1},we={key:0,class:"model-manage"},he={class:"title"},ge={key:1,class:"trade-manage"},be={class:"title"},Ce={class:"authority-manage"},$e={class:"title"},Te={class:"bottom-operate"},Ie={key:2,class:"bottom-operate",style:{marginTop:"12px",marginBottom:"20px"}},_e={__name:"Index",setup(b){const R=window.ethereum.isMetaMask,{t:r}=x(),w=ee(),_=te(),e=re(),C=g(!1),m=T(()=>_.walletAddress.toLowerCase()===e.owner.toLowerCase()),M=T(()=>{if(e.deployerId==1)return I(e.buyFundFee).plus(e.buyLPFee).plus(e.buyBurnFee);if(e.deployerId==2||e.deployerId==3)return I(e.buyFundFee).plus(e.buyLPFee).plus(e.buyRewardFee)}),j=T(()=>{if(e.deployerId==1)return I(e.sellFundFee).plus(e.sellLPFee).plus(e.sellBurnFee);if(e.deployerId==2||e.deployerId==3)return I(e.sellFundFee).plus(e.sellLPFee).plus(e.sellRewardFee)});let E=e.name;e.$subscribe((t,o)=>{o.name!=E&&(document.title=r("manageName",{name:o.name}),E=o.name)});const h=g(!1),O=g(!1),$=g(!1),L=g("");function W(){h.value=!0}const z=T(()=>r("operationHash",{hash:A(L.value)}));async function H(){O.value=!0;try{const t=await U.wallet.contract(e.tokenAddress,e.abi);let o=await t.renounceOwnership();L.value=o.hash,o.wait().then(async f=>{f.status===1&&(d({type:"success",message:r("upChainSuccessfully")}),e.owner=await t.owner())}),$.value=!0,h.value=!1}catch(t){console.log(t),t.info&&t.info.error&&t.info.error.code===4001?d(r("userCancelOperate")):t.error&&t.error.message&&t.error.message=="Canceled"?d(r("userCancelOperate")):d(r("unkonwError"))}finally{O.value=!1}}async function V(){try{await window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:e.tokenAddress,symbol:e.symbol,decimals:e.decimals,image:""}}})}catch(t){console.log(t),t.info&&t.info.error&&t.info.error.code===4001?d(r("userCancelOperate")):t.error&&t.error.message&&t.error.message=="Canceled"?d(r("userCancelOperate")):d(r("unkonwError"))}}async function q(){if(!C.value&&m.value&&!e.tradeStart){C.value=!0;try{await(await(await U.wallet.contract(e.tokenAddress,e.abi)).startTrade()).wait(),d({type:"success",message:r("tradeOpening")}),e.tradeStart=!0}catch(t){console.log(t.info),t.info&&t.info.error&&t.info.error.code===4001?d(r("userCancelOperate")):t.error&&t.error.message&&t.error.message=="Canceled"?d(r("userCancelOperate")):d(r("unkonwError"))}finally{C.value=!1}}}function D(){w.push("/createToken/manage/"+e.deployerId+"/"+e.tokenAddress+"/mintToken")}function J(){m.value&&w.push("/createToken/manage/"+e.deployerId+"/"+e.tokenAddress+"/whiteList")}function G(){console.log(m.value),m.value&&w.push("/createToken/manage/"+e.deployerId+"/"+e.tokenAddress+"/taxEditing")}function K(){w.push("/createToken/manage/"+e.deployerId+"/"+e.tokenAddress+"/transferOwnership")}function Q(){window.open("https://m.jfliquidity.xyz/add?utm_source=ave.ai")}function X(){w.push("/lockMaster")}return(t,o)=>{const f=F("van-button"),v=F("van-cell"),Y=F("van-switch");return p(),y(se,null,[a("div",ue,[de,a("div",ce,[a("div",pe,[a("div",me,[l(ne,{class:"token-icon",tokenIcon:n(oe)(n(_).chain.toLowerCase(),n(e).tokenAddress.toLowerCase())},null,8,["tokenIcon"]),a("div",fe,s(n(e).name),1)]),a("div",ve,[a("div",null,s(t.$t("chain"))+"："+s(n(_).chain.toUpperCase()),1),a("div",null,s(t.$t("tokenSymbol"))+"："+s(n(e).symbol),1),a("div",null,s(t.$t("totalSupply"))+"："+s(n(e).totalSupply),1),a("div",null,[n(e).deployerId==0?(p(),y("span",ye,s(t.$t("rate"))+"："+s(t.$t("freeTax")),1)):(p(),y("span",ke,s(t.$t("tax"))+"："+s(t.$t("buy"))+s(M.value)+"% "+s(t.$t("sell"))+s(j.value)+"%",1))]),a("div",null,[c(s(t.$t("managerAddress"))+"："+s(n(A)(n(e).owner))+" ",1),l(N,{class:"icon",name:"copy",onClick:o[0]||(o[0]=i=>n(B)(n(e).owner))})]),a("div",null,[c(s(t.$t("tokenAddress"))+"："+s(n(A)(n(e).tokenAddress))+" ",1),l(N,{class:"icon",name:"copy",onClick:o[1]||(o[1]=i=>n(B)(n(e).tokenAddress))})])])])]),n(e).canMint?(p(),y("div",we,[a("div",he,s(t.$t("economicManagement")),1),l(v,{class:"cell"},{title:u(()=>[c(s(t.$t("published"))+" "+s(n(e).totalSupply),1)]),extra:u(()=>[l(f,{class:"btn",type:"primary",round:"",size:"mini",onClick:o[2]||(o[2]=i=>D()),disabled:!m.value},{default:u(()=>[c(s(t.$t("mint")),1)]),_:1},8,["disabled"])]),_:1})])):k("",!0),n(e).deployerId!=0&&(n(e).enableManualStartTrade||n(e).enableChangeTax||n(e).enableWhiteList)?(p(),y("div",ge,[a("div",be,s(t.$t("tradeManage")),1),n(e).deployerId!=0&&n(e).enableManualStartTrade?(p(),S(v,{key:0,class:"cell",title:t.$t("openTrade")},{extra:u(()=>[l(Y,{class:"switch","model-value":n(e).tradeStart,loading:C.value,onClick:o[3]||(o[3]=i=>q()),disabled:n(e).tradeStart||!m.value},null,8,["model-value","loading","disabled"])]),_:1},8,["title"])):k("",!0),n(e).deployerId!=0&&n(e).enableChangeTax?(p(),S(v,{key:1,title:t.$t("taxEdit"),"is-link":"",onClick:o[4]||(o[4]=i=>G())},{value:u(()=>[c(s(t.$t("buy"))+s(M.value)+"% "+s(t.$t("sell"))+s(j.value)+"% ",1)]),_:1},8,["title"])):k("",!0),n(e).deployerId!=0&&n(e).enableWhiteList?(p(),S(v,{key:2,title:t.$t("whiteList"),"is-link":"",value:n(e).whiteListCount,onClick:o[5]||(o[5]=i=>J())},null,8,["title","value"])):k("",!0)])):k("",!0),a("div",Ce,[a("div",$e,s(t.$t("authorityManagement")),1),l(v,{class:"cell",title:t.$t("contractOwnership")},{extra:u(()=>[l(f,{class:"btn",type:"primary",round:"",size:"mini",onClick:W,disabled:!m.value},{default:u(()=>[c(s(t.$t("renounce")),1)]),_:1},8,["disabled"])]),_:1},8,["title"]),l(v,{class:"cell",title:t.$t("transferOwnership")},{extra:u(()=>[l(f,{class:"btn",type:"primary",round:"",size:"mini",onClick:K,disabled:!m.value},{default:u(()=>[c(s(t.$t("transfer")),1)]),_:1},8,["disabled"])]),_:1},8,["title"])]),a("div",Te,[l(f,{type:"primary",class:"manage-btn",onClick:Q},{default:u(()=>[c(s(t.$t("LPAddOrManage")),1)]),_:1}),l(f,{type:"primary",class:"lock-btn",onClick:X},{default:u(()=>[c(s(t.$t("lockToken")),1)]),_:1})]),n(R)?(p(),y("div",Ie,[l(f,{type:"primary",block:"",onClick:V},{default:u(()=>[c(s(t.$t("importToWallet")),1)]),_:1})])):k("",!0)]),l(P,{show:h.value,"onUpdate:show":o[6]||(o[6]=i=>h.value=i),title:t.$t("giveUpConfirm"),message:t.$t("giveUpConfirmInfo"),cancelButtonText:t.$t("thinkAgain"),confirmButtonText:t.$t("confirmAndGiveUp"),confirmButtonLoading:O.value,onOnConfirm:H,onOnCancel:o[7]||(o[7]=i=>h.value=!1)},null,8,["show","title","message","cancelButtonText","confirmButtonText","confirmButtonLoading"]),l(P,{show:$.value,"onUpdate:show":o[8]||(o[8]=i=>$.value=i),title:t.$t("giveUpSuccesslly"),message:z.value,showCancelButton:!1,confirmButtonText:t.$t("copyHash"),onOnConfirm:o[9]||(o[9]=i=>n(B)(L.value)),onOnCancel:o[10]||(o[10]=i=>$.value=!1)},null,8,["show","title","message","confirmButtonText"])],64)}}},Me=Z(_e,[["__scopeId","data-v-7b0c5a78"]]);export{Me as default};
