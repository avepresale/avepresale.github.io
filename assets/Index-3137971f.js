import{_ as j,d as A,f as F,u as q,U as E,g as N,h as H,N as L,i as G,p as J,n as K,r as w,o as i,c as _,b as l,j as a,a as d,m as p,t as x,k as g,l as $,s as O,q as Q,F as X,x as Y}from"./index-f1b0dec3.js";import{u as Z,M as ee,S as P,L as te}from"./SingleSelect-fee73fca.js";import{s as oe}from"./function-call-0bd88380.js";import"./ethers-1df84b72.js";import"./units-ecedf105.js";import"./bignumber-3e8dfdf6.js";const se={class:"body"},ae={class:"top"},ne={class:"tools-bar"},le={class:"left"},ie={class:"address-text"},ce={style:{"margin-left":"4px"}},re={class:"tools"},de={class:"select"},ue={class:"launchpad-content"},fe={class:"text"},he={__name:"Index",setup(me){const c=A(),o=Z();F();const{t:u}=q();E("reload");const f=N(!1),h=N(!1),m=N(!1),t=H({page:1,pageSize:10,launchpadList:[],refreshing:!1,loading:!1,finished:!1,error:!1});async function W(){await c.connectWallet()}function T(){oe({title:u("tips"),message:u("disonnectWallet"),confirmButtonText:u("confirm"),cancelButtonText:u("cancel")}).then(()=>{c.disconnectWallet()}).catch(()=>{})}function b(){h.value=!1,m.value=!1,f.value=!f.value,f.value?document.body.style.overflow="hidden":document.body.style.overflow=""}function B(e){if(e.length===0){O(u("selectNetworkWarn"));return}b(),o.checkedNetworks=e,v()}const V=L(()=>o.networks.length===o.checkedNetworks.length?"allNetworks":u("networks",{num:o.checkedNetworks.length}));function C(){f.value=!1,m.value=!1,h.value=!h.value,h.value?document.body.style.overflow="hidden":document.body.style.overflow=""}function M(e){C(),o.checkedPlatform=e,v()}const U=L(()=>o.platforms.find(e=>e.value===o.checkedPlatform).name);function I(){f.value=!1,h.value=!1,m.value=!m.value,m.value?document.body.style.overflow="hidden":document.body.style.overflow=""}function z(e){I(),o.checkedStatus=e,v()}const D=L(()=>o.statusList.find(e=>e.value===o.checkedStatus).name);G(()=>{y()});function v(){t.page=1,t.launchpadList=[],t.finished=!1,t.error=!1,y()}async function y(){t.loading=!0;let e=J({duration:0});console.log(o.checkedNetworks.toString());let s="";o.checkedPlatform!=="all"&&(s=o.checkedPlatform);let k="";o.checkedStatus!=="all"&&(k=o.checkedStatus);try{let r=await K.launchpad.getLaunchpadList(t.page,t.pageSize,o.checkedNetworks.toString(),s,k);if(console.log(r),r.data.status==0){for(let S of r.data.data.list)t.launchpadList.push(S);r.data.data.list.length<t.pageSize?t.finished=!0:t.page++}}catch(r){t.error=!0,console.log(r)}finally{e.close(),t.loading=!1,t.refreshing=!1}}return(e,s)=>{const k=w("van-image"),r=w("van-empty"),S=w("van-list"),R=w("van-pull-refresh");return i(),_("div",se,[l("div",ae,[l("div",ne,[l("div",le,[l("div",{onClick:s[0]||(s[0]=n=>a(c).showSelectDapp=!0)},[d(g,{class:"icon",name:"menu"})]),a(c).isConnectWallet?(i(),_("div",{key:0,class:"address",onClick:T},[a(c).chainIcon?(i(),p(k,{key:0,class:"chain-icon",round:"",src:a(c).chainIcon},null,8,["src"])):(i(),p(g,{key:1,class:"chain-icon",name:"wallet"})),l("div",ie,x(a(Q)(a(c).walletAddress)),1)])):(i(),_("div",{key:1,class:"address",onClick:W},[d(g,{name:"wallet"}),l("div",ce,x(e.$t("pleaseConnectWallet")),1)]))]),l("div",re,[d(g,{name:"language",onClick:s[1]||(s[1]=n=>a(c).showLanguagePicker=!0)})])]),l("div",de,[d(ee,{onConfirm:B,onToggleSelect:b,show:f.value,option:a(o).networks,checked:a(o).checkedNetworks,showName:e.$t(V.value)},null,8,["show","option","checked","showName"]),d(P,{onConfirm:M,onToggleSelect:C,show:h.value,option:a(o).platforms,checked:a(o).checkedPlatform,showName:e.$t(U.value)},null,8,["show","option","checked","showName"]),d(P,{onConfirm:z,onToggleSelect:I,show:m.value,option:a(o).statusList,checked:a(o).checkedStatus,showName:e.$t(D.value)},null,8,["show","option","checked","showName"])])]),l("div",ue,[d(R,{modelValue:t.refreshing,"onUpdate:modelValue":s[5]||(s[5]=n=>t.refreshing=n),onRefresh:v,"pulling-text":e.$t("pulling"),"loosing-text":e.$t("loosing"),"loading-text":e.$t("loading")},{default:$(()=>[t.launchpadList.length==0?(i(),p(r,{key:0,class:"empty-box"},{image:$(()=>[d(g,{class:"icon",name:"emptyHistory"}),l("div",fe,x(e.$t("noRecord")),1)]),_:1})):(i(),p(S,{key:1,class:"launchpad-list",loading:t.loading,"onUpdate:loading":s[2]||(s[2]=n=>t.loading=n),"loading-text":e.$t("loading"),finished:t.finished,"error-text":e.$t("errorText"),"finished-text":e.$t("noMore"),error:t.error,"onUpdate:error":s[3]||(s[3]=n=>t.error=n),onLoad:s[4]||(s[4]=n=>y())},{default:$(()=>[(i(!0),_(X,null,Y(t.launchpadList,n=>(i(),p(te,{class:"launchpad-item",launchpadItem:n,key:n.address},null,8,["launchpadItem"]))),128))]),_:1},8,["loading","loading-text","finished","error-text","finished-text","error"]))]),_:1},8,["modelValue","pulling-text","loosing-text","loading-text"])])])}}},ye=j(he,[["__scopeId","data-v-8ba55de8"]]);export{ye as default};
