import{D as A}from"./Dialog-f7b1eaaf.js";import{_ as C,u as x,d as k,f as E,K as w,g as i,r as v,o as B,c as O,b as V,a as c,l as g,j as $,F as H,q as M,s,n as N,A as T,t as U,v as D}from"./index-08da7f30.js";import{u as L}from"./manage-f091af6a.js";import{a as F,f as I}from"./units-2a23e6b5.js";/* empty css                                                       */import"./bignumber-3e8dfdf6.js";const j={class:"mint-token"},q={__name:"EditMaxSwapAmount",setup(K){const{t}=x(),_=k();E();const o=L(),h=w(()=>_.walletAddress.toLowerCase()===o.owner.toLowerCase()),m=i(""),n=i(""),y=w(()=>t("operationHash",{hash:M(m.value)})),p=i(!1),r=i(!1);function S(a){return a.replace("-","")}async function b(){if(!n.value){s(t("amountEmpty"));return}if(n.value.replace(".","").length>34){s(t("amountOver"));return}let a=n.value.split(".");if(a[1]&&a[1].length>o.decimals){s(t("amountOver"));return}r.value=!0;try{const e=await N.wallet.contract(o.tokenAddress,o.abi);let l=await e.changeSwapLimit(F(n.value,o.decimals));s({type:"success",message:t("submitSuccess")}),m.value=l.hash,p.value=!0,l.wait().then(async d=>{if(d.status===1){s({type:"success",message:t("upChainSuccessfully")});let f=await e.maxSwapAmount();o.maxSwapAmount=I(f.toString(),o.decimals)}r.value=!1})}catch(e){console.log(e),e.info&&e.info.error&&e.info.error.code===4001?s(t("userCancelOperate")):e.error&&e.error.message&&e.error.message=="Canceled"?s(t("userCancelOperate")):s(t("unkonwError")),r.value=!1}finally{}}return(a,e)=>{const l=v("van-field"),d=v("van-cell-group"),f=v("van-button");return B(),O(H,null,[V("div",j,[c(d,{inset:""},{default:g(()=>[c(l,{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=u=>n.value=u),"label-width":"9.2em",type:"number",label:a.$t("swapAmount"),placeholder:a.$t("pleaseEnter"),formatter:S,"input-align":"right"},null,8,["modelValue","label","placeholder"])]),_:1}),c(f,{type:"primary",round:"",block:"",class:"btn",onClick:b,loading:r.value,disabled:!h.value},{default:g(()=>[T(U(a.$t("submit")),1)]),_:1},8,["loading","disabled"])]),c(A,{show:p.value,"onUpdate:show":e[1]||(e[1]=u=>p.value=u),title:a.$t("submitSuccess"),message:y.value,showCancelButton:!1,confirmButtonText:a.$t("copyHash"),onOnConfirm:e[2]||(e[2]=u=>$(D)(m.value))},null,8,["show","title","message","confirmButtonText"])],64)}}},W=C(q,[["__scopeId","data-v-858eefda"]]);export{W as default};
